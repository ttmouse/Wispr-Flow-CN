# ç¯å¢ƒç®¡ç†æŒ‡å—

## ğŸ¯ ç›®æ ‡

ç»Ÿä¸€å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼Œé¿å…"åœ¨æˆ‘çš„æœºå™¨ä¸Šèƒ½è·‘"çš„é—®é¢˜ã€‚

## ğŸ“‹ å½“å‰ç¯å¢ƒçŠ¶å†µ

### ç¯å¢ƒç±»å‹å¯¹æ¯”

| ç¯å¢ƒç±»å‹ | è·¯å¾„ | ç”¨é€” | æ¨èåº¦ |
|---------|------|------|--------|
| **conda funasr_env** | `/Users/douba/miniconda3/envs/funasr_env` | æ‰“åŒ…appä½¿ç”¨ | âœ… **æ¨è** |
| **é¡¹ç›®venv** | `./venv/` | ç›´æ¥è¿è¡Œä½¿ç”¨ | âŒ ä¸æ¨è |
| **conda base** | `/Users/douba/miniconda3` | ç³»ç»Ÿé»˜è®¤ | âŒ ä¸æ¨è |

### é—®é¢˜æ ¹æº

- **æ‰“åŒ…app** ä½¿ç”¨ `conda funasr_env` ç¯å¢ƒ
- **ç›´æ¥è¿è¡Œ** ä½¿ç”¨ `venv` ç¯å¢ƒ
- **ä¸¤ä¸ªç¯å¢ƒçš„ä¾èµ–ç‰ˆæœ¬å¯èƒ½ä¸åŒ**ï¼Œå¯¼è‡´è¡Œä¸ºå·®å¼‚

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### 1. ä½¿ç”¨ç¯å¢ƒç®¡ç†è„šæœ¬

```bash
# æ£€æŸ¥å½“å‰ç¯å¢ƒçŠ¶æ€
./tools/env_manager.sh status

# è®¾ç½®æ¨èçš„condaç¯å¢ƒ
./tools/env_manager.sh setup

# æ¸…ç†ä¸éœ€è¦çš„venvç¯å¢ƒ
./tools/env_manager.sh cleanup

# ä½¿ç”¨æ¨èç¯å¢ƒè¿è¡Œåº”ç”¨
./tools/env_manager.sh run
```

### 2. æ‰‹åŠ¨ç¯å¢ƒç®¡ç†

#### æ¨èæ–¹å¼ï¼šä½¿ç”¨condaç¯å¢ƒ

```bash
# æ¿€æ´»condaç¯å¢ƒ
conda activate funasr_env

# è¿è¡Œåº”ç”¨
python src/main.py

# æ‰“åŒ…åº”ç”¨ï¼ˆä¼šè‡ªåŠ¨ä½¿ç”¨condaç¯å¢ƒï¼‰
bash tools/build_app.sh
```

#### ä¸æ¨èï¼šä½¿ç”¨venvç¯å¢ƒ

```bash
# è¿™ç§æ–¹å¼å¯èƒ½å¯¼è‡´ç¯å¢ƒä¸ä¸€è‡´
source venv/bin/activate
python src/main.py
```

## ğŸ”§ ç¯å¢ƒè®¾ç½®æ­¥éª¤

### æ­¥éª¤1ï¼šæ£€æŸ¥condaå®‰è£…

```bash
conda --version
```

å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å®‰è£… [Miniconda](https://docs.conda.io/en/latest/miniconda.html)

### æ­¥éª¤2ï¼šåˆ›å»ºä¸“ç”¨ç¯å¢ƒ

```bash
# åˆ›å»ºPython 3.10ç¯å¢ƒ
conda create -n funasr_env python=3.10 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate funasr_env

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### æ­¥éª¤3ï¼šéªŒè¯ç¯å¢ƒ

```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version

# æ£€æŸ¥å…³é”®åŒ…
python -c "import torch; print('PyTorch:', torch.__version__)"
python -c "import funasr; print('FunASR:', funasr.__version__)"
```

## ğŸ“ å¼€å‘å·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘

```bash
# 1. æ¿€æ´»ç¯å¢ƒ
conda activate funasr_env

# 2. è¿è¡Œåº”ç”¨
python src/main.py

# æˆ–è€…ä½¿ç”¨ç¯å¢ƒç®¡ç†è„šæœ¬
./tools/env_manager.sh run
```

### æ‰“åŒ…å‘å¸ƒ

```bash
# æ‰“åŒ…ä¼šè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„ç¯å¢ƒ
bash tools/build_app.sh
```

### ä¾èµ–ç®¡ç†

```bash
# æ·»åŠ æ–°ä¾èµ–åï¼Œæ›´æ–°requirements.txt
conda activate funasr_env
pip freeze > requirements.txt

# æˆ–è€…æ‰‹åŠ¨ç¼–è¾‘requirements.txtï¼Œç„¶åå®‰è£…
pip install -r requirements.txt
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæœ‰å¤šä¸ªç¯å¢ƒï¼Ÿ

A: å†å²åŸå› å¯¼è‡´çš„ï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨condaç¯å¢ƒã€‚

### Q: å¦‚ä½•çŸ¥é“å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªç¯å¢ƒï¼Ÿ

A: 
```bash
# æŸ¥çœ‹Pythonè·¯å¾„
which python

# æŸ¥çœ‹condaç¯å¢ƒ
echo $CONDA_DEFAULT_ENV

# ä½¿ç”¨ç¯å¢ƒç®¡ç†è„šæœ¬æ£€æŸ¥
./tools/env_manager.sh status
```

### Q: å¯ä»¥åˆ é™¤venvç¯å¢ƒå—ï¼Ÿ

A: å¯ä»¥ï¼Œä½†å»ºè®®å…ˆç¡®ä¿condaç¯å¢ƒå·¥ä½œæ­£å¸¸ï¼š

```bash
# æµ‹è¯•condaç¯å¢ƒ
conda activate funasr_env
python src/main.py

# å¦‚æœæ­£å¸¸å·¥ä½œï¼Œå¯ä»¥åˆ é™¤venv
rm -rf venv
```

### Q: å¦‚ä½•åœ¨IDEä¸­è®¾ç½®æ­£ç¡®çš„ç¯å¢ƒï¼Ÿ

A: 
- **PyCharm**: Settings â†’ Project â†’ Python Interpreter â†’ é€‰æ‹©condaç¯å¢ƒ
- **VS Code**: Ctrl+Shift+P â†’ Python: Select Interpreter â†’ é€‰æ‹©condaç¯å¢ƒ
- **ç»ˆç«¯**: ç¡®ä¿è¿è¡Œ `conda activate funasr_env`

## ğŸ¯ æœ€ä½³å®è·µ

1. **ç»Ÿä¸€ç¯å¢ƒ**: å¼€å‘å’Œç”Ÿäº§ä½¿ç”¨åŒä¸€ä¸ªcondaç¯å¢ƒ
2. **ç‰ˆæœ¬é”å®š**: åœ¨requirements.txtä¸­æŒ‡å®šå…·ä½“ç‰ˆæœ¬å·
3. **ç¯å¢ƒéš”ç¦»**: ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„condaç¯å¢ƒ
4. **å®šæœŸæ¸…ç†**: åˆ é™¤ä¸ä½¿ç”¨çš„ç¯å¢ƒå’ŒåŒ…
5. **æ–‡æ¡£æ›´æ–°**: ç¯å¢ƒå˜æ›´æ—¶åŠæ—¶æ›´æ–°æ–‡æ¡£

## ğŸ“š ç›¸å…³å‘½ä»¤é€ŸæŸ¥

```bash
# condaç¯å¢ƒç®¡ç†
conda env list                    # åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ
conda activate funasr_env         # æ¿€æ´»ç¯å¢ƒ
conda deactivate                  # é€€å‡ºç¯å¢ƒ
conda env remove -n funasr_env    # åˆ é™¤ç¯å¢ƒ

# åŒ…ç®¡ç†
pip list                          # åˆ—å‡ºå·²å®‰è£…åŒ…
pip freeze > requirements.txt    # å¯¼å‡ºä¾èµ–
pip install -r requirements.txt  # å®‰è£…ä¾èµ–

# ç¯å¢ƒæ£€æŸ¥
./tools/env_manager.sh status    # æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
./tools/env_manager.sh compare   # å¯¹æ¯”ç¯å¢ƒå·®å¼‚
```
